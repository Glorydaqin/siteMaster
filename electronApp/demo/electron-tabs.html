<!DOCTYPE html>
<html>

<head>
  <title>electron-tabs-demo</title>
  <link rel="stylesheet" href="../electron-tabs.css">
  <link rel="stylesheet" href="../node_modules/dist/dragula.css">
  <link rel="stylesheet" href="font/iconfont.css">

  <style>
    .etabs-tabs {
      padding-left: 65px;
    }

    .control-buttons {
      background: #f9f1f1b5;
      width: 64px;
      position: absolute;
      z-index: 999;
      /*border-right: 1px solid #aaa;*/
    }

    .control-buttons a {
      text-align: center;
      display: inline-block;
      width: 32px;
      height: 32px;
      line-height: 32px;
      margin: 0;
      padding: 0;
      float: left;
      cursor: pointer;
    }
  </style>
</head>
<body style="margin:0">

<div class="etabs-tabgroup">
  <div class="control-buttons">
    <a class="iconfont icon-fanhui" id="btn-fanhui" title="返回"></a>
    <a class="iconfont icon-shuaxin" id="btn-shuaxin" title="刷新"></a>
  </div>
  <div class="etabs-tabs"></div>
  <div class="etabs-buttons"></div>
</div>
<div class="etabs-views"></div>


<script>
  //const TabGroup = require('electron-tabs') normally but for demo :
  const TabGroup = require("../index");
  const dragula = require("dragula");
  const {ipcRenderer} = require('electron')

  let tabGroup = new TabGroup({
    // 显示新加标签
    // newTab: {
    //   title: 'New Tab'
    // },
    ready: function (tabGroup) {
      dragula([tabGroup.tabContainer], {
        direction: "horizontal"
      });
    }
  });

  tabGroup.addTab({
    title: 'baidu',
    src: 'http://app.kwfinder.com',
  });

  tabGroup.addTab({
    title: "Electron",
    src: "http://electron.atom.io",
    visible: true,
    active: true
  });

  let btnFanhui = document.getElementById('btn-fanhui');
  let btnShuaxin = document.getElementById('btn-shuaxin');
  btnFanhui.onclick = function () {
    // if(tabGroup.getActiveTab().webview.canGoBack()){
    //   tabGroup.getActiveTab().webview.goBack();
    // }


    tabGroup.getActiveTab().webview.openDevTools();
    let cookie = 'TDZWdVpvU0Z0VE5kSURQQ3FDYjNlU3JTVUFWYWk0a212WFVWNCtBQ1Z3M0pXRlB4R1UzVDVCeVhncjh3VmFYQW9yMzZybUphTEM4WjJvSFUrQkVlZHVyMTRuTjdLUWd6STlpZlloeTA2dUFoY1RmNnVEMkMra2xpUHhCMzZzc2x3R3l2dWttUmtWeG5Cc3Z6WHhqR2tudjM4UGRnTXJzTVkzVVpNN1QyT3Q4cFhPSFdJUmhnQnRxWmNvVUFoZGNabmpKbVFwYUEwWGw3SkFJOXRKR1Fpa2dBN2J4b1JzZzg1Y2FiQStBaExwNnVtMEFueEljTDRveElkQnhmajZ0bFFQaUQ5NURublBNQm5LNEZNbVBxNVhNc1E2NGNLZ1p5ejlVbjU0WG1hZ0xLcUJsdWVRdFNjRy9VM1ZZbEZ0a2otLU1MWDAySXJMcUFXcVdWcldsT0REaUE9PQ%3D%3D--5942359398dde41fea56a33d7c709725485cb802';


    // tabGroup.getActiveTab().webview.executeJavaScript(`
    // document.cookie = "_mangotools_com_session='` + cookie + `';httpOnly=true;secure=true;url='https://mangools.com/'";
    // `, false, function (result) {
    //   console.log(result)
    // })
    tabGroup.getActiveTab().webview.executeJavaScript(`
    document.cookie = "_mangotools_com_session=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
    document.cookie = "_mangotools_com_session=` + cookie + `; expires=Fri, 31 Dec 9999 23:59:59 GMT; domain=mangools.com; path=/";
    `, false, function (result) {
      console.log(result)
    })
    //   // 先用来写cookie
    //   let new_cookie = {
    //     'url': 'https://mangools.com/',
    //     "name": "_mangotools_com_session",
    //     'value': request.cookie,
    //     // 'domain': 'mangools.com',
    //     'httpOnly': true,
    //     'secure': true,
    //     // 'expirationDate': timestamps
    //   };
  }
  btnShuaxin.onclick = function () {
    tabGroup.getActiveTab().webview.reload();
  }
</script>
</body>
</html>
